<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <meta http-equiv="content-language" content="de">
  <meta http-equiv="desktop-type" content="tasks">
  <link href="css/pdf2png.css" rel="stylesheet">
  <title>AudioSlides4Web</title>
  <!-- END:   src/html/header.html -->
  <script language="javascript">
   // vDataJSON is the main JSON storage for the privacy friendly WebApp
   // File Loaded into vDataJSON by script tag
   var vDataJSON = {};
   vDataJSON.tpl = {};
   /* TEMPLATES
   vDataJSON.tpl contains the following templates:
     * vDataJSON.tpl["javascript"] File: tpl/javascript_tpl.js
       for creating the the Source Code for the UML class in javascript
     * vDataJSON.tpl["docu4github"] File: tpl/docu4github_tpl.js
       for creating the GitHub documentation from the UML source of the class
   */

   vDataJSON.out = {};
   /* HANDLEBARS COMPILERS
   vDataJSON.tpl contains the Handlebars compilers:
     * vDataJSON.out["javascript"] Compiler for template: tpl/javascript_tpl.js
       This compiler is used in the compileCode() method
       var mySource = vJSONEditor.compileCode.javascript(pJSON)
       creates the source code for the UML class in javascript
     * vDataJSON.out["docu4github"] Compiler for template: tpl/docu4github_tpl.js
       This compiler is used in the compileCode() method
       var mySource = vJSONEditor.compileCode.docu4github(pJSON)
   */
   vDataJSON.files = {
     "audio":[],
     "image":[]
   };

  </script>
  <!-- ### Data JSON Loaded File  ##################### -->
  <script src="db/data.js"></script>
  <!-- ### HANDLEBARS TEMPLATE  #####################
  Template ID: "audioslides"
  Template: vDataJSON["tpl"]["audioslides"]
  -->
  <script src="tpl/audioslides_tpl.js"></script>
  <script src="tpl/indexhtml_tpl.js"></script>
  <script src="tpl/singleslide_tpl.js"></script>
  <script src="tpl/lastslide_tpl.js"></script>


  <script src="js/dom2id.js"></script>
  <script src="js/linkparam.js"></script>
  <script src="js/filesaver.js"></script>
  <script src="js/canvas2blob.js"></script>
  <script src="js/dom2id.js"></script>
  <script src="js/date_time.js"></script>
  <script src="js/linkparam.js"></script>
  <script src="js/handlebars4code.js"></script>
  <script src="js/loadfile4dom.js"></script>


  <script src="js/string.js"></script>
  <script src="js/jszip.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/pdf.js"></script>
  <script src="js/pdf.worker.js"></script>
  <script src="js/loadfile4dom.js"></script>

  <script src="js/create4audioslides.js"></script>
  <!--
  <script src="js/audioslides4web.js"></script>
    -->
  <script language="javascript">
    var zip = new JSZip();
    /* ZIP File
    The Audio Slide presentation is a bundle of multiple files
    organised in folders with:
       * HTML files
       * TXT files with folders information
       * Audio Files in folder /audio
       * Images with single slides in folder /images
    The folder structure is generated by audioslides for web
    */
  </script>

    <script>

      //-----------------------------------------------
      //---- LoadFile4DOM -----------------------------
      //-----------------------------------------------
      var lf4d = new LoadFile4DOM();
      var options = {
        "debug": false // if true, it will show the hidden <input type="file" ...> loaders in DOM
      };
      lf4d.init(document,options);
      //-----------------------------------------------
      //----- Create a new Loader "file2image" --------
      //-----------------------------------------------
      var file2image = lf4d.get_loader_options("addfile2image","image_thumb");
      file2image.returntype = "tag";
      file2image.width = 300;
      file2image.multiple = true;
      // Define what to do with the loaded data
      file2image.onload = function (data,err) {
        if (err) {
          // do something on error, perr contains error message
          console.error(err);
        } else {
          // do something with the file content in data e.g. store  in a HTML textarea (e.g. <textarea id="mytextarea" ...>
          console.log("CALL: file2image.onload('" + data.name + "')");
          var vNode = document.getElementById("outimage");
          if (vNode) {
            //console.log("CALL: file2image.onload('" + data.name + "'): "+JSON.stringify(data,null,4));
            var arr_img = vDataJSON.files.image;
            vNode.innerHTML = vNode.innerHTML + "<li>Slide " + extract_number(data.name,arr_img.length)+ ": <tt>" + data.name + "</tt><br>" + data.tag + "</li>";
            arr_img.push(data);
            //zip.file(data.name, data.file, {base64: true})
            setSlideCount();
          } else {
            console.error("ERROR: DOM Element 'outimage' does not exist!");
          }
        }
      };
      // create the load dialog 'file2image'
      lf4d.create_load_dialog(file2image);
      //-----------------------------------------------
      //----- Create a new Loader "file2audio" --------
      //-----------------------------------------------
      var file2audio = lf4d.get_loader_options("addfile2audio","audio");
      file2audio.returntype = "filehash";
      // Define what to do with the loaded data
      file2audio.onload = function (data,err) {
        if (err) {
          // do something on error, perr contains error message
          console.error(err);
        } else {
          // do something with the file content in data e.g. store  in a HTML textarea (e.g. <textarea id="mytextarea" ...>
          console.log("CALL: file2audio.onload('" + data.name + "')");
          var vNode = document.getElementById("outaudio");
          if (vNode) {
            //console.log("CALL: file2audio.onload('" + data.name + "'): "+JSON.stringify(data,null,4));
            var arr_audio = vDataJSON.files.audio;
            vNode.innerHTML = vNode.innerHTML + "<li>Audio " + extract_number(data.name,arr_audio.length)+ ": <tt>" + data.name + "</tt> </li>";
            arr_audio.push(data);
            setSlideCount();
            //zip.file(data.name, data.file, {base64: true})
        } else {
            console.error("ERROR: DOM Element 'outlist' does not exist!");
          }
        }
      };
      // create the load dialog 'file2audio'
      lf4d.create_load_dialog(file2audio);
      //-----------------------------------------------
    </script>

</head>
<body onload="lf4d.create()" style="margin:10px;background:#C0C0C0;font-family:Arial,Helvetica,sans-serif">
<!-- BODY HEADER - File: src/html/bodyheader.html -->
      <hr>
      <center>
        <h2>Audio Slides for Web v2.1.6</h2>
        <h3><i>based on Framework   <a href="https://github.com/paulrouget/dzslides" target="_blank">DZSlides</a>  by Paul Rouget</i></h3>
      </center>
    <hr>
    <center>
      <button id="infobutton" class="default-button" onclick="$('#infotext').toggle();return false"><img src="img/icons-svg/info-white.svg"> Info</button> -
      <a href="https://niehausbert.gitlab.io/audioslides4web/tutorial"  onclick="alert('LOAD TIME TUTORIAL:\nThe tutorial contains many animations so please wait until tutorial is loaded!')"> <img src="img/icons-svg/info-black.svg"> Tutorial</a>
      <div id="infotext" style="display:none;align:left;text-align: left;width:80%">
        <hr>
        <a href="https://niehausbert.gitlab.io/audioslides4web" target="_blank">AudioSlides4Web</a> was created as a online alternative for <a href="https://en.wikiversity.org/wiki/PanDocElectron" target="_blank">PanDocElectron</a>.
        See <a href="https://en.wikiversity.org/wiki/PanDocElectron/AudioSlides4Web" target="_blank">AudioSlides4Web in Wikiversity</a> for further details or the <a href="tutorial/index.html" target="_blank">AudioSlides4Web-Tutorial</a>.
        This tool creates a ZIP-file in the browser and will copy your audio files in the subfolder <tt>/audio/</tt> of the ZIP-file. The slides e.g. as PNG-images or GIF-animations will be stored in the folder <tt>/images/</tt> of the ZIP files. The images and audio comment are not submitted to server. All operations are performed in the browser.
        Take care that the filename of slides have a number in it, which represents the slidenumber, e.g. <tt>audio5.mp3</tt> for audio comment for 5th slide <tt>img5.png</tt> or <tt>audio0.mp3</tt> for the title slide <tt>img0.png</tt>
        <hr>
        <b>PDF as Source for Slides:</b> You can also load a PDF-File as source for the slides with [Add Slides]-Button and select PDF pages (landscape format) as slides for your presentation. You can skip some slides or reorder the slides for your presentation.
        Adapt the basename of your audio files and images to the base name in the interface below.
        <hr>
        <b>ZIP-File Export:</b>  Press [Download AudioSlides ZIP] to download the generated ZIP file. The <a href="https://en.wikiversity.org/wiki/AppLSAC" target="_blank">AppLSAC</a> is a privacy friendly WebApp the generates the ZIP-file in your browser with the library <tt>jszip.js</tt>, so the audio files, PDF and image files are loaded into your browser instead uploading the files to a remote server.
        <hr>
        <b>Start Presentation:</b> You can view the webbased presentation by extrating the ZIP file and load the file <tt>index.html</tt>.
        You can navigate with cursor buttons or the navigation buttons top right. Press key [F] to show the presentation in fullscreen mode.
        <hr>
        <b>Changes Slides/Audio:</b> You can exchange the slides or audio comments just by replacing  the slide <tt>img5.png</tt> or the audio comment <tt>audio5.mp3</tt> for slide 5.
      <hr>
      </div>
    </center>
<!-- END: src/html/bodyheader.html -->
<!-- BEGIN: src/html/body.html -->
  <center>
  <form action="index.html" target="_blank" id="fInputTable">
    <table border="1">
      <tr>
        <td valign="top">
          <b>Title</b><input type="text" id="tUndefined" value="ERROR" style="display:none">
        </td>
        <td>
          <input type="text" size="80" name="title" id="tTitle" value="My Presentation Title">
        </td>
      </tr>
      <tr>
        <td valign="top">
          <select name="topic" id="tTopic">
            <option value=" "> - </option>
            <option value="Conference">Conference</option>
            <option value="Course" selected>Course</option>
            <option value="Meeting">Meeting</option>
            <option value="Institution">Institution</option>
            <option value="Organisation">Organisation</option>
            <option value="Topic">Topic</option>
            <option value="Tutorial">Tutorial</option>
            <option value="Workshop">Workshop</option>
          </select>
        </td>
        <td>
          <input type="text" size="80" name="course" id="tCourse" value="Ecotoxicology">
        </td>
      </tr>
      <tr>
        <td valign="top">
          <b>Author</b>
        </td>
        <td>
          <input type="text" size="80" name="author" id="tAuthor" value="My Name">
        </td>
      </tr>
      <tr>
        <td valign="top">
          <b>Date</b>
        </td>
        <td>
          <input type="text" size="80" name="date" id="tDate" value="00.00.00">
        </td>
      </tr>
      <tr style="display:none">
          <td valign="top">
            <b>Audio Slides</b>
          </td>
          <td>
            <select name="audioslide" id="sAudioSlide">
              <option value="yes">Use Player for Audio Slides</option>
              <option value="no">NO Audio Slides</option>
            </select>
          </td>
      </tr>
      <tr>
        <td valign="top">
          <b>Slide Index</b>
        </td>
        <td>
          First Index: <input type="text" size="4" name="first" id="tFirst" value="0">
          Last Index: <input type="text" size="4" name="last" id="tLast" value="40">
        </td>
      </tr>
      <tr>
        <td valign="top">
          <b>Slide Image Files</b>
        </td>
        <td>
          Basename: <tt>/images/</tt><input type="text" size="10" name="imagebasename" id="tImageBaseName" value="img">.<input type="text" size="3" name="imageext" id="tImageExt" value="png">
        </td>
      </tr>
        <tr>
        <td valign="top">
          <b>Audio Files</b>
        </td>
        <td>
          Basename: <tt>/audio/</tt><input type="text" size="10" name="audiobasename" id="tAudioBaseName" value="audio">.<input type="text" size="3" name="audioext" id="tAudioExt" value="mp3"> Type:
          <input type="text" size="4" name="audiotype" id="tAudioType" value="mpeg">
        </td>
      </tr>
      <tr>
        <td valign="top">
          <b>HTML Filename</b>
        </td>
        <td>
          <input type="text" size="30" name="filename" id="tFileName" value="index.html">
        </td>
      </tr>
      <tr>
        <td valign="top">
          <b>Folder/ZIP Name</b>
        </td>
        <td>
          <input type="text" size="30" name="zipfilename" id="tZIPFileName" value="">
          <a href="#" onclick="alert('If tex box is empty, folder name will be created from title of the presentation.\nFolder: '+get_root_dir()+'/\nZIP: '+get_root_dir()+'.zip')"> <img src="img/icons-svg/info-black.svg"></a>
        </td>
      </tr>
      <tr>
          <td valign="top">
            <b>Download Link for ZIP</b>
          </td>
          <td>
            <select name="downloadlink" id="tDownloadLink">
              <option value="yes" selected>YES</option>
              <option value="no">NO</option>
            </select>
            <a href="#" onclick="alert('If set to YES a download link for the ZIP-file will be added to the start slide.\nPlace the ZIP and the folder of the presentation in the same directory, e.g. in aud4web/ folder.\n  Folder: aud4web/'+get_root_dir()+'/\n  ZIP: aud4web/'+get_root_dir()+'.zip')"> <img src="img/icons-svg/info-black.svg"></a>
          </td>
      </tr>
      <tr>
        <td valign="top">
          <b>Audio Slides:</b>
        </td>
        <td>
          <!--
          <input type="button" id="bSource" value="Download Slides" onclick="callSource();return false">
          -->
          <button class="default-button" onclick="show_add_slides();return false"> <img src="img/icons-svg/fa-folder-open-white.svg"> Add Slides</button>
          <button class="default-button" onclick="lf4d.open_dialog('addfile2audio');return false"> <img src="img/icons-svg/audio-white.svg"> Add Audio </button>
          <button class="cancel-button" onclick="reset_ZIP();return false"> <img src="img/icons-svg/recycle-white.svg"> Reset</button> -
          <button class="default-button" id="download-zip" onclick="callSourceZIP();return false"> <img src="img/icons-svg/fa-file-save-white.svg"> Download AudioSlides ZIP</button>
          <a href="https://niehausbert.gitlab.io/audioslides4web/tutorial"> <img src="img/icons-svg/info-black.svg"> Info</a>
          <!-- <input type="button" id="bSourceZIP" value="Download Audiopresentation" onclick="callSourceZIP();return false" > -->
           <!-- input type="submit" id="bSubmit" value="Download Presentation" -->
        </td>
      </tr>
    </table>
</form>
<div id="divaddslides" style="display:none">
  <button id="upload-images" class="upload-slides" onclick="lf4d.open_dialog('addfile2image');$('');return false"> <img src="img/icons-svg/plus-white.svg"> <img src="img/icons-svg/fa-picture-white.svg"> Add Images</button>
  <button id="upload-button" class="upload-slides"><img src="img/icons-svg/fa-folder-open-white.svg"> Select PDF</button>
  <button id="pdf-selector-show" class="upload-slides" style="display:none"><img src="img/icons-svg/eye-white.svg"> Show PDF Slides</button>
  <button id="close-add-slides" class="cancel-button"><img src="img/icons-svg/fa-cancel-white.svg"> Close</button>
</div>
<div id="divpdf" style="display:none">
  <input type="file" id="file-to-upload" accept="application/pdf" />
  <div id="pdf-main-container">
  	<div id="pdf-loader">Loading document ...</div>
    <div id="pdf-contents">
      <div id="pdf-meta">
        <div id="pdf-buttons">
          <button id="pdf-prev" class="upload-slides"> <img src="img/icons-svg/carat-l-white.svg"> </button>
          <button id="pdf-next" class="upload-slides"> <img src="img/icons-svg/carat-r-white.svg"> </button> &nbsp;
          <button id="pdf-add" class="upload-slides"> <img src="img/icons-svg/plus-white.svg"> <img src="img/icons-svg/fa-picture-white.svg"> Add PNG</button>
          <button id="pdf-download" class="upload-slides" onclick="document.getElementById('download-image').click()">  <img src="img/icons-svg/fa-file-save-white.svg"> Download PNG</button>
          <button id="pdf-close" class="cancel-button"><img src="img/icons-svg/fa-cancel-white.svg"> Close</button>
        </div>
        <div id="page-count-container">Page <div id="pdf-current-page"></div> of <div id="pdf-total-pages"></div></div>
      </div>
      <canvas id="pdf-slide-preview" width="300"></canvas>
      <canvas id="pdf-canvas" width="1024" style="display:none"></canvas>
      <div id="page-loader">Loading page ...</div>
      <a id="download-image" class="BUTTON_BLUE" href="#" style="display:none">Download PNG</a>
    </div>
  </div> <!-- pdf-main-container -->
</div> <!-- divpdf -->

<br>

    <table border="1">
      <tr>
        <td align="center">
          <b>Added Image</b>
        </td>
        <td align="center">
          <b>Added Audio</b>
        </td>
      </tr>
      <tr>
        <td valign="top">
          <ul id="outimage">
          </ul>
        </td>
        <td valign="top">
          <ul id="outaudio">
          </ul>
        </td>
      </tr>

    </table>
</center>
<!-- END: src/html/body.html -->

<!-- BEGIN: src/html/bodytail.html -->
<hr>
<div style="margin:80px">
  <b> Main used Libaries: </b>
  <ul>
    <li>
      <a href="https://github.com/paulrouget/dzslides" target="_blank">DZSlides</a>  by Paul Rouget
    </li>
    <li>
      <a href="https://www.npmjs.com/package/jszip" target="_blank">jszip NPM</a>
    </li>
    <li>
      <a href="https://gitlab.com/niehausbert/loadfile4dom" target="_blank">LoadFile4DOM GitLab</a>
    </li>
    <li>
      <a href="https://github.com/mozilla/pdf.js" target="_blank">pdf.js</a> PDF Loader for HTML5 by Mozilla
    </li>
  </ul>
</div>
<center style="display:none">
  <textarea id="outtext" rows="10" cols="120">
  </textarea>
</center>
<hr>
<!-- END:   src/html/bodytail.html -->

	   <!-- BEGIN: src/html_tail.html -->
	   <center style="font-size: 10px;">
			  <a href="https://gitlab.com/niehausbert/audioslides4web" target="_blank"> GitHub Sources AudioSlides4Web</a> - <a href="https://gitlab.com/niehausbert/audioslides4web/archive/master.zip"  target="_blank">Download AudioSlides4Web ZIP</a>
			  <br>
			  Version: 2.1.6 Date: 2020/11/30 16:49:23 Author: Engelbert Niehaus
	   </center>
     <!-- END:  src/html_tail.html -->

	<!-- BEGIN: src/html/tailscript.html -->

<script language="javascript">
    //---------------------------------------
    //---COMPILE TEMPLATES Handlebars4Code---
    //---------------------------------------
    Handlebars4Code.create_compiler(vDataJSON.tpl);
    vDataJSON.out = Handlebars4Code.get_compiler();


    //---------------------------------------
    //------READ LINKPARAMETER---------------
    //---------------------------------------
    var vLinkParam = new LinkParam();
    vLinkParam.init(document);
    //------ POPULATE JSON ------------------
    var vJSON = vDataJSON.initdata;
    for (var id in vDOM2ID) {
      if (vDOM2ID.hasOwnProperty(id)) {
        if (vLinkParam.exists(vDOM2ID[id])) {
          var id4JSON = getJSONID(id);
          //vJSON["title"] = vLinkParam.getValue(vDOM2ID["tTitle"]);
          switch (id) {
            case "tFirst":
              vJSON[id4JSON] = getInteger(vLinkParam.getValue(vDOM2ID[id]));
            break;
            case "tLast":
              vJSON[id4JSON] = getInteger(vLinkParam.getValue(vDOM2ID[id]));
            break;
            default:
              vJSON[id4JSON] = vLinkParam.getValue(vDOM2ID[id]);
          }
        }
      }
    }
    el("tDate").value = getDateTime();

</script>

<script>
// init for pdf2png.js
var __PDF_DOC,
	__CURRENT_PAGE,
	__TOTAL_PAGES,
	__PAGE_RENDERING_IN_PROGRESS = 0,
  __CANVAS = $('#pdf-canvas').get(0),
  __CANVAS_PREVIEW = $('#pdf-slide-preview').get(0),
  __CANVAS_CTX = __CANVAS.getContext('2d');
  __CANVAS_CTX_PREVIEW= __CANVAS_PREVIEW.getContext('2d');
</script>
<script src="js/pdf2png.js"></script>
<!-- END:   src/html/tailscript.html -->

<!-- BEGIN: src/html/tail.html -->
  </body>
</html>
<!-- END:   src/html/tail.html -->
